<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Particle Interaction</title>
    <style>
        /* Basic styles to make the canvas fill the screen */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: #1a1a2e; /* Dark blue background */
            overflow: hidden;   /* Hide scrollbars */
        }
        
        canvas {
            display: block;
            background: #0f0f1a; /* Even darker canvas background */
        }
    </style>
</head>
<body>
    <!-- The only HTML element is the canvas for the particles -->
    <canvas id="particleCanvas"></canvas>

    <script>
        // Configuration for the particle system
        const config = {
            ROWS: 100,
            COLS: 300,
            THICKNESS: 6400, // This is the force strength
            SPACING: 3,
            MARGIN: 100,
            COLOR: {r: 76, g: 201, b: 240}, // Light blue color
            DRAG: 0.95,      // How quickly particles slow down
            EASE: 0.25,      // How quickly particles return to their original spot
        };

        // Global variables
        const NUM_PARTICLES = config.ROWS * config.COLS;
        let canvas, ctx;
        let list = []; // Array to hold all particle objects
        let mouse = { x: 0, y: 0 };
        let bounds;

        // Initialize the particle system
        function init() {
            // Set up the canvas
            canvas = document.getElementById('particleCanvas');
            ctx = canvas.getContext('2d');
            
            // Set canvas dimensions based on the particle grid
            canvas.width = config.COLS * config.SPACING + config.MARGIN * 2;
            canvas.height = config.ROWS * config.SPACING + config.MARGIN * 2;
            
            // Create all the particle objects
            createParticles();
            
            // Listen for mouse and touch movements on the canvas
            canvas.addEventListener('mousemove', handleMouseMove);
            canvas.addEventListener('touchmove', handleTouchMove, { passive: false });
            
            // Start the animation loop
            animate();
        }

        // Create the grid of particles
        function createParticles() {
            list = []; // Clear any existing particles
            
            for (let i = 0; i < NUM_PARTICLES; i++) {
                const p = {
                    vx: 0, // velocity x
                    vy: 0, // velocity y
                    x: config.MARGIN + config.SPACING * (i % config.COLS), // current x position
                    y: config.MARGIN + config.SPACING * Math.floor(i / config.COLS), // current y position
                    ox: config.MARGIN + config.SPACING * (i % config.COLS), // original x position
                    oy: config.MARGIN + config.SPACING * Math.floor(i / config.COLS)  // original y position
                };
                
                list.push(p);
            }
        }

        // Handle mouse movement
        function handleMouseMove(e) {
            bounds = canvas.getBoundingClientRect();
            mouse.x = e.clientX - bounds.left;
            mouse.y = e.clientY - bounds.top;
        }

        // Handle touch movement on mobile devices
        function handleTouchMove(e) {
            e.preventDefault();
            bounds = canvas.getBoundingClientRect();
            mouse.x = e.touches[0].clientX - bounds.left;
            mouse.y = e.touches[0].clientY - bounds.top;
        }

        // Animation loop that runs every frame
        function animate() {
            // Update the positions of all particles
            updateParticles();
            
            // Draw the updated particles onto the canvas
            drawParticles();
            
            // Request the next frame to continue the loop
            requestAnimationFrame(animate);
        }

        // Update particle positions based on physics
        function updateParticles() {
            // Update each particle
            for (let i = 0; i < NUM_PARTICLES; i++) {
                const p = list[i];
                
                // Calculate distance from the particle to the mouse
                const dx = mouse.x - p.x;
                const dy = mouse.y - p.y;
                const d = dx * dx + dy * dy; // Using squared distance for performance
                
                // Apply a repelling force if the mouse is close enough
                if (d < config.THICKNESS) {
                    const f = -config.THICKNESS / d;
                    const angle = Math.atan2(dy, dx);
                    
                    p.vx += f * Math.cos(angle);
                    p.vy += f * Math.sin(angle);
                }
                
                // Apply drag to slow the particle down
                p.vx *= config.DRAG;
                p.vy *= config.DRAG;
                
                // Move the particle based on its velocity and ease it back to its original position
                p.x += p.vx + (p.ox - p.x) * config.EASE;
                p.y += p.vy + (p.oy - p.y) * config.EASE;
            }
        }

        // Draw particles on the canvas
        function drawParticles() {
            // Clear the entire canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Set the color for the particles
            ctx.fillStyle = `rgb(${config.COLOR.r}, ${config.COLOR.g}, ${config.COLOR.b})`;
            
            // Draw each particle as a small rectangle (1x1 pixel)
            for (let i = 0; i < NUM_PARTICLES; i++) {
                const p = list[i];
                ctx.fillRect(p.x, p.y, 1, 1);
            }
        }

        // Initialize when the page loads
        window.addEventListener('load', init);
    </script>
</body>
</html>
